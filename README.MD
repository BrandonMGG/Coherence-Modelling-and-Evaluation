# Coherence-Modelling-and-Evaluation
This cache coherence modeling and simulation tool, implemented in C, helps us understand how multi-core processors manage shared memory. It allows us to explore cache coherence protocols like MESI and MOESI by simulating CPUs and a communication bus. This way, we can analyze cache states, memory consistency, and protocol effects on system performance, providing valuable insights into modern computing environments. 

# Installation
1. Clone the repository to your local machine:
   - `git clone https://github.com/BrandonMGG/Coherence-Modelling-and-Evaluation`
   - cd Coherence-Modelling-and-Evaluation
2. Compile and run the User Interface: `make mainUI, `make ./mainUI`

# Tools and dependencies
- `GCC compiler`
- `Make Utility`
- `POSIX Threads (pthread) library`: `<pthread.h>`
- `Message Queue library (for inter-thread communication)`: `<mqueue.h>`
- `Standard C libraries`
- `GTK for C/C++ Graphic User Interface`: install with  `sudo apt-get install libgtk-3-dev`
# Supported platform
- `OS`: this project was developed on Ubuntu Linux Distro 18.04 and 20.04. 


## Code Structure

The code is organized into several files:

- `memory.h` and `memory.c`: Contains definitions and functions related to memory management.
- `cache.h` and `cache.c`: Defines the cache data structure and cache-related operations.
- `random_instruction.h` and `random_instruction.c`: Generates random instructions for CPU execution.
- `cpu.h` and `cpu.c`: Represents CPU structures and functions, including executing instructions.
- `messages.h` and `messages.c`: Defines message queues for inter-thread communication.
- `bus.h` and `bus.c`: Represents the bus structure and operations for CPU communication.

## Threads

The code uses multiple threads to simulate CPUs and a bus for communication. Threads are created and managed in the `main` function. Here are the key threads:

### CPU Threads

- CPU threads represent individual cores.
- They execute random instructions generated by `random_instruction.h`.
- CPU thread results are printed, including cache coherence statistics such as `INV`, `READ_REQ_RESP`, and `WRITE_REQ_RESP`.

### Bus Thread

- The bus thread manages communication between CPU cores.
- It controls access to shared resources and enforces cache coherence protocols.
- The `bus_thread` function processes tasks related to bus operations.
- Cache states and values can be observed through debug print statements.

## Cache Coherence Protocols

Cache coherence protocols ensure that multiple CPU cores see a consistent view of memory. The code implements the MESI and MOESI (Modified,Owned, Exclusive, Shared, Invalid) protocol, which is a common cache coherence protocol.

- `INV`: Represents the number of invalidations.
- `READ_REQ_RESP`: Represents the number of read request responses.
- `WRITE_REQ_RESP`: Represents the number of write request responses.
- `INCR_REQ_RESP`: Represents the number of increment request responses.
